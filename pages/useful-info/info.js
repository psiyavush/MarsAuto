"use strict";var infoContent=document.querySelector(".useful-info__content"),overlay=document.querySelector(".overlay"),addBtn=document.querySelector(".useful-info-top-btn"),addForm=document.querySelector(".catalog__form"),getAllInfo=function a(r){fetch("https://mars-auto-default-rtdb.europe-west1.firebasedatabase.app/info.json").then(function(t){return t.json()}).then(function(t){if(t.slice().reverse().filter(function(t,e){return 5*r-6<e&&e<5*r}).forEach(function(t,e){infoContent.innerHTML+='\n        <div style="flex-direction: '.concat(e%2==0?"row":"row-reverse",'" class="useful-info__content-card">\n            <img class="useful-info__content-img" src="').concat(t.images,'" alt="').concat(t.title,'">\n            <div class="useful-info__content-right">\n                <p class="useful-info__content-title">').concat(t.title,'</p>\n                <p class="useful-info__content-info">').concat(t.description,'</p>\n                <button type="button" onclick="location.href=\'../article/index.html?id=').concat(t.id,'\'" class="useful-info__content-btn" data-id="').concat(t.id,'">Подробнее</button>\n                <button type="button" class="useful-info__content-delete" data-id="').concat(t.id,'">Удалить</button>\n                <button type="button" class="useful-info__content-update" data-id="').concat(t.id,'">Изменить</button>\n            </div>\n        </div>')}),5<t.length){var e=document.createElement("ul"),n=(e.classList.add("useful-info-list"),document.createElement("span")),o=document.createElement("span"),c=(n.classList.add("arrow-prev"),o.classList.add("arrow-next"),n.textContent="<",o.textContent=">",document.createElement("span")),i=document.createElement("span");c.classList.add("arrow-first"),i.classList.add("arrow-last"),c.textContent="<<",i.textContent=">>";for(var l=1;l<=Math.ceil(t.length/5);l++)e.innerHTML+='\n                <li style="cursor: pointer; display: '.concat(l===r||l+1===r||l-1===r||1===r&&3===l||r===Math.ceil(t.length/5)&&l===Math.ceil(t.length/5)-2?"flex":"none",'" class="useful-info-item ').concat(l===r?"active":"none",'" data-id="').concat(l,'">').concat(l,"</li>\n                ");r<Math.ceil(t.length/5)-1&&(e.append(o),e.append(i),o.addEventListener("click",function(){document.querySelector(".useful-info-list").innerHTML="",infoContent.innerHTML="",a(r+1)}),i.addEventListener("click",function(){document.querySelector(".useful-info-list").innerHTML="",infoContent.innerHTML="",a(Math.ceil(t.length/5))})),2<r&&(e.prepend(n),e.prepend(c),n.addEventListener("click",function(){document.querySelector(".useful-info-list").innerHTML="",infoContent.innerHTML="",a(r-1)}),c.addEventListener("click",function(){document.querySelector(".useful-info-list").innerHTML="",infoContent.innerHTML="",a(1)})),infoContent.after(e)}document.querySelectorAll(".useful-info-item").forEach(function(t){t.addEventListener("click",function(){document.querySelector(".useful-info-list").innerHTML="",infoContent.innerHTML="",a(+t.dataset.id)})});o=document.querySelectorAll(".useful-info__content-delete");document.querySelectorAll(".useful-info__content-update").forEach(function(c){c.addEventListener("click",function(){var t=document.getElementById("title"),e=document.getElementById("image"),n=document.getElementById("info"),o=document.getElementById("id");formBtn.textContent="Изменить",overlay.style.display="flex",t.value=c.parentElement.children[0].textContent,n.value=c.parentElement.children[1].textContent,o.value=c.dataset.id,e.value=c.parentElement.previousElementSibling.getAttribute("src")})}),o.forEach(function(t){t.addEventListener("click",function(){fetch("http://localhost:3000/info/".concat(t.dataset.id),{method:"DELETE"}).then(function(){location.reload()})})})})},formBtn=(getAllInfo(1),addForm.addEventListener("submit",function(t){t.preventDefault(),"Изменить"===formBtn.textContent?fetch("http://localhost:3000/info/".concat(t.target[3].value),{headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},method:"PATCH",body:JSON.stringify({title:t.target[0].value,images:t.target[1].value,description:t.target[2].value})}).then(function(){overlay.style.display="none",location.reload()}):fetch("http://localhost:3000/info",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t.target[0].value,images:t.target[1].value,description:t.target[2].value})}).then(function(){overlay.style.display="none",location.reload()}).catch(function(t){return console.log(t)})}),document.querySelector(".catalog-form-btn"));addBtn.addEventListener("click",function(){formBtn.textContent="Добавить",overlay.style.display="flex"}),overlay.addEventListener("click",function(t){t.target.classList.contains("overlay")&&(overlay.style.display="none",location.reload())});